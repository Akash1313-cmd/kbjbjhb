<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GMap Pro API v1.0 - Documentation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e4e4e7;
            line-height: 1.6;
            padding: 20px;
        }
        .container { max-width: 900px; margin: 0 auto; }
        header {
            background: rgba(30, 41, 59, 0.8);
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 30px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        h1 { color: #fff; font-size: 32px; margin-bottom: 10px; }
        .version {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-block;
        }
        .base-url {
            background: rgba(15, 23, 42, 0.6);
            padding: 12px 20px;
            border-radius: 8px;
            border: 1px solid rgba(59, 130, 246, 0.3);
            margin-top: 15px;
            font-family: monospace;
            color: #60a5fa;
        }
        .section {
            background: rgba(30, 41, 59, 0.6);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        h2 {
            color: #fff;
            font-size: 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .endpoint {
            background: rgba(15, 23, 42, 0.6);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        .endpoint-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .method {
            padding: 6px 12px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 12px;
            text-transform: uppercase;
        }
        .method.get { background: #10b981; color: white; }
        .method.post { background: #3b82f6; color: white; }
        .method.delete { background: #ef4444; color: white; }
        .path {
            font-family: monospace;
            color: #60a5fa;
            font-weight: 600;
        }
        .desc { color: #cbd5e1; margin: 10px 0; }
        .code {
            background: #0f172a;
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            overflow-x: auto;
        }
        .code pre {
            font-family: monospace;
            font-size: 13px;
            color: #cbd5e1;
            margin: 0;
        }
        .info {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        footer {
            text-align: center;
            padding: 30px;
            color: #94a3b8;
            border-top: 1px solid rgba(148, 163, 184, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üó∫Ô∏è GMap Pro API <span class="version">v1.0</span></h1>
            <p style="color: #94a3b8; margin-top: 8px;">Professional Google Maps Data Extraction</p>
            <div class="base-url"><strong>Base URL:</strong> http://localhost:3000</div>
        </header>

        <!-- Quick Start -->
        <div class="section">
            <h2>üöÄ Quick Start</h2>
            <div class="info">
                <strong>Authentication:</strong> All endpoints require <code style="background: rgba(15, 23, 42, 0.8); padding: 2px 6px; border-radius: 4px;">X-API-Key</code> header
            </div>
            <div class="code">
                <pre># Start scraping
curl -X POST http://localhost:3000/api/scrape \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{"keywords": ["coffee shops in mumbai"], "workers": 5}'

# Check status
curl http://localhost:3000/api/status/job_xxx \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# Get results
curl http://localhost:3000/api/results/job_xxx \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"</pre>
            </div>
        </div>

        <!-- Scraping -->
        <div class="section">
            <h2>üìç Scraping</h2>
            
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method post">POST</span>
                    <span class="path">/api/scrape</span>
                </div>
                <p class="desc">Start multi-keyword scraping job</p>
                <div class="code">
                    <pre>{
  "keywords": ["restaurants in delhi", "cafes in mumbai"],
  "workers": 10
}

Response:
{
  "status": "success",
  "jobId": "job_abc123",
  "estimatedTime": "8 minutes"
}</pre>
                </div>
            </div>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method post">POST</span>
                    <span class="path">/api/scrape/single</span>
                </div>
                <p class="desc">Quick single keyword scrape</p>
                <div class="code">
                    <pre>{ "keyword": "hotels in goa", "workers": 5 }</pre>
                </div>
            </div>
        </div>

        <!-- Job Management -->
        <div class="section">
            <h2>üíº Jobs</h2>
            
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method get">GET</span>
                    <span class="path">/api/status/:jobId</span>
                </div>
                <p class="desc">Get job status and progress</p>
            </div>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method get">GET</span>
                    <span class="path">/api/jobs</span>
                </div>
                <p class="desc">List all your jobs (supports ?status=completed)</p>
            </div>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method post">POST</span>
                    <span class="path">/api/cancel/:id</span>
                </div>
                <p class="desc">Cancel running job</p>
            </div>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method delete">DELETE</span>
                    <span class="path">/api/jobs/:id</span>
                </div>
                <p class="desc">Delete job and results</p>
            </div>
        </div>

        <!-- Results -->
        <div class="section">
            <h2>üìä Results</h2>
            
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method get">GET</span>
                    <span class="path">/api/results/:jobId</span>
                </div>
                <p class="desc">Get job results</p>
                <div class="code">
                    <pre>{
  "results": {
    "restaurants in delhi": [
      {
        "name": "Bukhara",
        "address": "ITC Maurya, Delhi",
        "phone": "+91 11 1234 5678",
        "rating": 4.6,
        "reviews": 2500,
        "website": "https://example.com"
      }
    ]
  },
  "totalPlaces": 150
}</pre>
                </div>
            </div>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method get">GET</span>
                    <span class="path">/api/results/:jobId/download?format=csv</span>
                </div>
                <p class="desc">Download results (formats: json, csv, xlsx)</p>
            </div>
        </div>

        <!-- WebSocket -->
        <div class="section">
            <h2>üîå WebSocket</h2>
            <div class="info">
                <strong>Connection:</strong> <code style="background: rgba(15, 23, 42, 0.8); padding: 2px 6px; border-radius: 4px;">ws://localhost:3000</code>
            </div>
            
            <div class="code">
                <pre>// Connect
const socket = io('http://localhost:3000')

// Subscribe to job
socket.emit('subscribe', 'job_abc123')

// Listen for progress
socket.on('job_progress', (data) => {
  console.log(`Progress: ${data.progress.percentage}%`)
})

// Job completed
socket.on('job_completed', (data) => {
  console.log('Done!', data)
})</pre>
            </div>
        </div>

        <footer>
            <p><strong>GMap Pro API v1.0</strong></p>
        </footer>
    </div>
</body>
</html>
